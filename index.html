<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>logger: logger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">logger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">logger </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Multi-level logger for C++. Supports logging to both console and file. Based on logger from <a href="https://github.com/cginternals/cppassist">cginternals/cppassist</a>. The documentation can be found <a href="https://lukaswagner.github.io/logger/">here</a>.</p>
<p><a href="https://ci.appveyor.com/project/lukaswagner/logger/branch/master"></a></p>
<h2>Contents</h2>
<ol type="1">
<li><a href="#setup">Setup</a><ol type="a">
<li><a href="#basic-dependencies">Basic Dependencies</a></li>
<li><a href="#dependency-setup">Dependency Setup</a></li>
<li><a href="#building-the-project">Building the Project</a></li>
</ol>
</li>
<li><a href="#usage">Usage</a><ol type="a">
<li><a href="#enabling-the-logger">Enabling the Logger</a></li>
<li><a href="#creating-output">Creating Output</a></li>
<li><a href="#further-customization">Further Customization</a></li>
</ol>
<ol type="a">
<li><a href="#debug-macros">Debug Macros</a></li>
<li><a href="#complete-example">Complete Example</a></li>
</ol>
</li>
</ol>
<h2>Setup</h2>
<h3>Basic Dependencies</h3>
<p>You'll need</p><ul>
<li><a href="https://cmake.org/">CMake</a> to generate build files.</li>
<li>A C++14-compatible compiler, e.g. g++7 or VS 2017.</li>
<li><a href="https://git-scm.com/">Git</a> to automatically clone googletest if you want to build the tests.</li>
<li><a href="http://www.doxygen.org/">Doxygen</a> if you want to generate the documentation.</li>
</ul>
<h3>Dependency Setup</h3>
<p>tl;dr: </p><div class="fragment"><div class="line">cd dependencies</div><div class="line">cmake .</div></div><!-- fragment --><p>The tests use the <a href="https://github.com/google/googletest">googletest framework</a>, so you'll have to download and build this if you want to build the tests. In order to do so, just run <code>cmake .</code> in the dependecy subdirectory. This will build googletest with the default generator. Hint for VS users: By default, a 32 bit compiler is used. You should specify the correct generator, for example by calling <code>cmake . -G "Visual Studio 15 2017 Win64"</code>.</p>
<p>If you already have a compiled version of googletest lying around, you can skip this and just specify the installation's base dir by passing <code>-DGTEST_ROOT="path/to/gtest"</code> when configuring the logger.</p>
<h3>Building the Project</h3>
<p>tl;dr: </p><div class="fragment"><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake .. -DBUILD_EXAMPLE=ON -DBUILD_TESTS=ON -DBUILD_DOCS=ON</div></div><!-- fragment --><p>Create a build dir and configure the project using CMake. There are three options to enable optional targets: <br />
* BUILD_EXAMPLE: Builds an example application using the logger.</p><ul>
<li>BUILD_TESTS: Builds the tests checking the logger's functionality. Requires googletest.</li>
<li>BUILD_DOCS: Generates the documentation. Requires Doxygen.</li>
</ul>
<p>Afterwards, you can build the project. Just open the <code>.sln</code> in Visual Studio and build it from there, or use <code>make</code> if you're on Unix/Linux. Note: The docs are not included in the default target, you'll have to explicitly build them.</p>
<h2>Usage</h2>
<h3>Enabling the Logger</h3>
<p>Enable the logger by calling <code><a class="el" href="namespacelogger.html#ac364ffc0fab52e954d6706afea91eb3a" title="Enables the logger with the given minimum Levels. Call again to change these settings. This results in a new log file being generated, if file logging is enabled. ">enable()</a></code> with the appropriate levels. Let's say you want to show only the important logs in the console to maintain a cleaner output, but write all messages to a log file in case you need to debug your application: </p><div class="fragment"><div class="line"><a class="code" href="namespacelogger.html#ac364ffc0fab52e954d6706afea91eb3a">logger::enable</a>(<a class="code" href="namespacelogger.html#a04a32b05c998cdc0aaa39274d1db03cfacde53c40e7aa44727cd70cb1f397e123">logger::Info</a>, <a class="code" href="namespacelogger.html#a04a32b05c998cdc0aaa39274d1db03cfae9d2eb3599c2a1728219baa52ff9de34">logger::Verbose</a>);</div></div><!-- fragment --><p> Only messages with the level <code>Info</code> or higher will be visible in the console, while everything (<code>Verbose</code> is the lowest level) will be written to the log file when setting up the logger like this.</p>
<h3>Creating Output</h3>
<p>Use the functions resembling the log levels to obtain a line object. You can use this to pipe content as if it were a <code>std::ostream</code>. </p><div class="fragment"><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>() &lt;&lt; <span class="stringliteral">&quot;a string: &quot;</span> &lt;&lt; anInt;</div></div><!-- fragment --><p> Once the line object gets destroyed, all content piped into it is concatenated with the message header and sent to the outputs.</p>
<p>Note: Message with the levels <code>Verbose</code>, <code>Debug</code> and <code>Info</code> are sent to <code>stdout</code>, while message with the levels <code>Warning</code> and <code>Error</code> are sent to <code>stderr</code>.</p>
<p>Since the <code>&lt;&lt;</code> operator is implemented using a template, you can print everything you can send to an <code>std::ostream</code>. If you provide your own <code>std::ostream&amp; operator&lt;&lt;</code> overload, you can even print your custom classes (see the <a href="#complete-example">Complete Example</a> for an example).</p>
<p>Additionally, you can pass a context to the log functions. You can use this to provide a better structured output. For example, calling </p><div class="fragment"><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Main setup&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Reading config file...&quot;</span></div></div><!-- fragment --><p> results in the following output: </p><div class="fragment"><div class="line">[Inf] [19:29:34] Main setup: Reading config file...</div></div><!-- fragment --><h3>Further Customization</h3>
<p>By default, contexts are fixed to 10 characters, resulting in the output being aligned cleanly. In order to change this number of characters according to your needs, you can use <code><a class="el" href="namespacelogger.html#ae936e01dc70495c57f4ff2168b6a5152" title="Sets the context lenght. ">setContextLength()</a></code>: </p><div class="fragment"><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;A very long context&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;It&#39;s cut off.&quot;</span>;</div><div class="line"><a class="code" href="namespacelogger.html#ae936e01dc70495c57f4ff2168b6a5152">logger::setContextLength</a>(20);</div><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;A very long context&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Now it fits.&quot;</span></div></div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">[Inf] [19:37:10] A very lon: It&#39;s cut off.</div><div class="line">[Inf] [19:37:10] A very long context : Now it fits.</div></div><!-- fragment --><p>You can customize the time output by using <code><a class="el" href="namespacelogger.html#a781df2af6b0739eccccbcd1ba55a0b81" title="Sets the format used printing the time. ">setTimeFormat()</a></code> (see <a href="https://en.cppreference.com/w/cpp/io/manip/put_time">std::put_time</a> for the used syntax) or completely hide it by using <code><a class="el" href="namespacelogger.html#ae4aeb130f211cfbfc90cbec68f29bd93" title="Sets whether the current time should be included in output. ">setPrintTime()</a></code>: </p><div class="fragment"><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Time test&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Default time format is %H:%M:%S.&quot;</span>;</div><div class="line"><a class="code" href="namespacelogger.html#a781df2af6b0739eccccbcd1ba55a0b81">logger::setTimeFormat</a>(<span class="stringliteral">&quot;%H:%M&quot;</span>);</div><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Time test&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Now the seconds are hidden.&quot;</span>;</div><div class="line"><a class="code" href="namespacelogger.html#ae4aeb130f211cfbfc90cbec68f29bd93">logger::setPrintTime</a>(<span class="keyword">false</span>);</div><div class="line"><a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Time test&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;And now the time is omitted.&quot;</span>;</div></div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">[Inf] [19:47:26] Time test : Default time format is %H:%M:%S.</div><div class="line">[Inf] [19:47] Time test : Now the seconds are hidden.</div><div class="line">[Inf] Time test : And now the time is omitted.</div></div><!-- fragment --><p> The same time syntax is used for naming the generated log file. By default, <code>log/Y-m-d-H-M-S.txt</code> is used - resulting in a file like <code>2018-08-11-20-00-10.txt</code> being created in the subdirectory <code>log</code>. You can customize this by passing a string containing the desired format to <code><a class="el" href="namespacelogger.html#ac364ffc0fab52e954d6706afea91eb3a" title="Enables the logger with the given minimum Levels. Call again to change these settings. This results in a new log file being generated, if file logging is enabled. ">enable()</a></code>.</p>
<h3>Debug Macros</h3>
<p>The proper way of debugging a program is by using a debugger. But we both know you don't do this, and instead add a log to every line of code to track the progress. Don't despair, this logger comes with macros to encourage this bad behaviour. These are defined in <code><a class="el" href="macros_8hpp.html" title="Debugging macros. ">macros.hpp</a></code>.</p>
<p><code>DEBUG_EXPR</code> can be used to log an expression before running it. Example usage: </p><div class="fragment"><div class="line">DEBUG_EXPR(std::cout &lt;&lt; &quot;test&quot; &lt;&lt; std::endl;)</div></div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">[Dbg] [14:30:52] DEBUG_EXPR     : std::cout &lt;&lt; &quot;test&quot; &lt;&lt; std::endl; (c:\users\lukas\documents\codekram\cpp\logger\src\example.cpp:56)</div><div class="line">test</div></div><!-- fragment --><p><code>DEBUG_VAL</code> can be used to debug a value. This evaluates a variable or exression, and logs both the expression and its value. Example usage: </p><div class="fragment"><div class="line">DEBUG_VAL(a)</div><div class="line">DEBUG_VAL(a * a)</div></div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">[Dbg] [14:30:52] DEBUG_VAL      : a = 3</div><div class="line">[Dbg] [14:30:52] DEBUG_VAL      : a * a = 9</div></div><!-- fragment --><h3>Complete Example</h3>
<p>This example is taken from the example application.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="logger_8hpp.html">logger.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// create a custom class to showcase operator overloading</span></div><div class="line"><span class="keyword">class </span>CustomClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keywordtype">int</span> m_memberVar;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// implement an operator for piping the class to an ostream - this will allow usage with the logger as well</span></div><div class="line">std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, <span class="keyword">const</span> CustomClass&amp; <span class="keywordtype">object</span>)</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> stream &lt;&lt; <span class="stringliteral">&quot;The custom object contains the value &quot;</span> &lt;&lt; <span class="keywordtype">object</span>.m_memberVar;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    <span class="comment">// enable the logger, only show messages with level &gt;= Info and disable file output completely</span></div><div class="line">    <a class="code" href="namespacelogger.html#ac364ffc0fab52e954d6706afea91eb3a">logger::enable</a>(<a class="code" href="namespacelogger.html#a04a32b05c998cdc0aaa39274d1db03cfacde53c40e7aa44727cd70cb1f397e123">logger::Info</a>, <a class="code" href="namespacelogger.html#a04a32b05c998cdc0aaa39274d1db03cfa01f84b904300faae6e4d6b51f0ff5ed4">logger::Off</a>);</div><div class="line"></div><div class="line">    <span class="comment">// let&#39;s disable the time output during the setup</span></div><div class="line">    <a class="code" href="namespacelogger.html#ae4aeb130f211cfbfc90cbec68f29bd93">logger::setPrintTime</a>(<span class="keyword">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">// we&#39;ll be using a long context name - let&#39;s increase the context length</span></div><div class="line">    <a class="code" href="namespacelogger.html#ae936e01dc70495c57f4ff2168b6a5152">logger::setContextLength</a>(15);</div><div class="line"></div><div class="line">    <span class="comment">// this will be shown</span></div><div class="line">    <a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Setup&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Loading config...&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// load some file, iterate over inputs, whatever - let&#39;s pretend this block is called in a loop</span></div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> someIntInConfig = 17;</div><div class="line">        <span class="comment">// this will be hidden in output, since Debug &lt; Info</span></div><div class="line">        <a class="code" href="namespacelogger.html#a06016a83a9f2be9663c9e73f1ff8e9f1">logger::debug</a>(<span class="stringliteral">&quot;Setup&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Found value &quot;</span> &lt;&lt; someIntInConfig &lt;&lt; <span class="stringliteral">&quot; in config.&quot;</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// this will be shown again</span></div><div class="line">    <a class="code" href="namespacelogger.html#ab613c5311b8978ceb1a7b518c0d6f57c">logger::info</a>(<span class="stringliteral">&quot;Setup&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Successfully loaded config.&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// now we&#39;re re-enabling time output</span></div><div class="line">    <a class="code" href="namespacelogger.html#ae4aeb130f211cfbfc90cbec68f29bd93">logger::setPrintTime</a>(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// by parsing some input we created this custom object</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> customObject = CustomClass{ 1338 };</div><div class="line"></div><div class="line">    <span class="comment">// warnings and errors are redirected to cerr instead of cout</span></div><div class="line">    <span class="keywordflow">if</span> (customObject.m_memberVar &gt; 1337)</div><div class="line">        <a class="code" href="namespacelogger.html#a195389ced3d6da20299f23804b06e342">logger::warning</a>(<span class="stringliteral">&quot;Input parsing&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Invalid input - &quot;</span> &lt;&lt; customObject;</div><div class="line"></div><div class="line">    <span class="comment">// enable logging of debug messages</span></div><div class="line">    <a class="code" href="namespacelogger.html#ac364ffc0fab52e954d6706afea91eb3a">logger::enable</a>(<a class="code" href="namespacelogger.html#a04a32b05c998cdc0aaa39274d1db03cfab6aa2dd2749878341b0414ff0cad8ecb">logger::Debug</a>);</div><div class="line"></div><div class="line">    <span class="comment">// log and execute line</span></div><div class="line">    <a class="code" href="macros_8hpp.html#a3e6a573cb9bf69e0e828327ca21a307c">DEBUG_EXPR</a>(<span class="keyword">auto</span> a = 3;)</div><div class="line"></div><div class="line">    <span class="comment">// log value name and evaluation result</span></div><div class="line">    <a class="code" href="macros_8hpp.html#a48cf7db7057a8c98e5e0b022ae77fb9c">DEBUG_VAL</a>(a)</div><div class="line">    <a class="code" href="macros_8hpp.html#a48cf7db7057a8c98e5e0b022ae77fb9c">DEBUG_VAL</a>(a * a)</div><div class="line">}</div></div><!-- fragment --><p> <code>stdout</code> output: </p><div class="fragment"><div class="line">[Inf] Setup          : Loading config...</div><div class="line">[Inf] Setup          : Successfully loaded config.</div><div class="line">[Dbg] [19:25:48] DEBUG_EXPR     : auto a = 3; (c:\users\lukas\documents\codekram\cpp\logger\src\example.cpp:55)</div><div class="line">[Dbg] [19:25:48] DEBUG_VAL      : a = 3</div><div class="line">[Dbg] [19:25:48] DEBUG_VAL      : a * a = 9</div></div><!-- fragment --><p> <code>stderr</code> output: </p><div class="fragment"><div class="line">[Wrn] [19:25:48] Input parsing  : Invalid input - The custom object contains the value 1338</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
